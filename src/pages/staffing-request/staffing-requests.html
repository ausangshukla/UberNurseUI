<ion-header>

  <ion-navbar color="primary">
    <ion-title>Staffing Requests</ion-title>
  </ion-navbar>

</ion-header>


<ion-content padding>

  <ion-card *ngIf="current_user.care_home && !current_user.care_home.verified">
    <ion-card-title class="center error-text">
      Care Home Verification Pending
    </ion-card-title>

    <ion-card-content>
      <p>
        Please call us to get your care home verified. 
        Post verification you will be able to enter requests for temporary staffing here.
      </p>
    </ion-card-content>
  </ion-card>


  <ion-card *ngIf="staffingRequests && staffingRequests.length == 0">
    <ion-card-title class="center">
      No Requests Found
    </ion-card-title>

    <ion-card-content>
      <p>
        Sorry there are no Requests at this time. Please check back later.
      </p>
    </ion-card-content>
  </ion-card>

  <ion-fab id="new_staffing_request_btn" bottom right 
    *ngIf="current_user.role!='Care Giver' && current_user.role!='Nurse' && current_user.care_home && current_user.care_home.verified ">
    <button ion-fab (click)="newRequest()"><ion-icon name="add"></ion-icon></button>
  </ion-fab>


  <ion-list>
    <button ion-item id="StaffingRequest-{{staffingRequest.id}}-item" 
      *ngFor="let staffingRequest of staffingRequests" (click)=getStaffingRequestDetails(staffingRequest)>
       
      <p>
        Care Home: {{staffingRequest.care_home.name}}
      </p>

      <p>
        Start: {{staffingRequest.start_date | date: 'dd/MM/yyyy H:mm'}}
      </p>
       
      <p>
        End: {{staffingRequest.end_date | date: 'dd/MM/yyyy H:mm'}}
      </p>
      
      <ion-badge>{{staffingRequest.price | currency}}</ion-badge> 
      <ion-badge color="secondary" *ngIf="staffingRequest.request_status == 'Open'">
        Open
      </ion-badge>
      <ion-badge color="danger" *ngIf="staffingRequest.request_status == 'Closed'">
        Closed
      </ion-badge>


    </button>
  </ion-list>

</ion-content>
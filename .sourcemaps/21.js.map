{"version":3,"sources":["../../src/pages/users/banking-details/banking-details.module.ts","../../src/pages/users/banking-details/banking-details.ts"],"names":[],"mappings":"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","file":"21.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { BankingDetailsPage } from './banking-details';\n\n@NgModule({\n  declarations: [\n    BankingDetailsPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(BankingDetailsPage),\n  ],\n  exports: [\n    BankingDetailsPage,\n  ]\n})\nexport class BankingDetailsModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/users/banking-details/banking-details.module.ts","import { IonicPage, NavController, NavParams, AlertController, ToastController, LoadingController } from 'ionic-angular';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { Component, ViewChild } from '@angular/core';\nimport { AngularTokenService } from 'angular-token';\nimport { Events } from 'ionic-angular';\nimport { UserApi } from '../../../providers/user-api';\nimport { ResponseUtility } from '../../../providers/response-utility';\n\n@IonicPage()\n@Component({\n  selector: 'page-bank-details',\n  templateUrl: 'banking-details.html',\n})\nexport class BankingDetailsPage {\n\n  user: {};\n  role = null;\n  slideOneForm: FormGroup;\n  submitAttempt: boolean = false;\n  insideSettingsTab = false;\n\n  constructor(public navCtrl: NavController,\n    public navParams: NavParams,\n    public formBuilder: FormBuilder,\n    public userApi: UserApi,\n    public respUtility: ResponseUtility,\n    public loadingController: LoadingController,\n    private tokenService: AngularTokenService,\n    public events: Events) {\n\n    this.slideOneForm = formBuilder.group({\n      bank_account: ['', Validators.compose([Validators.minLength(8), Validators.maxLength(8), Validators.required])],\n      sort_code: ['', Validators.compose([Validators.minLength(6), Validators.maxLength(6), Validators.required])],\n    });\n\n    let current_user = this.tokenService.currentUserData;\n    this.user = {\n      \"id\": current_user.id,\n      \"bank_account\": current_user[\"bank_account\"],\n      \"sort_code\": current_user[\"sort_code\"],\n      \"accept_bank_transactions\": current_user[\"accept_bank_transactions\"]\n    };\n\n    if (this.navParams.data[\"insideSettingsTab\"]) {\n      this.insideSettingsTab = true;\n    }\n\n  }\n\n  ionViewDidLoad() {\n    console.log('ionViewDidLoad BankingDetails');\n    this.respUtility.trackView(\"BankingDetails\");\n  }\n\n  save() {\n    this.respUtility.trackEvent(\"BankingDetails\", \"Save\", \"click\");\n    this.submitAttempt = true;\n    //console.log(this.user);\n    let loader = this.loadingController.create({\n      content: 'Saving ...'\n    });\n\n    if (this.slideOneForm.invalid) {\n      //this.signupSlider.slideTo(0);\n      console.log(\"Invalid form \", this.slideOneForm.errors);\n    }\n    else {\n      this.submitAttempt = false;\n      loader.present();\n\n      this.userApi.updateUser(this.user).subscribe(\n        user => {\n          this.respUtility.showSuccess('Saved successfully.');\n          this.events.publish(\"current_user:reload\");\n          if (!this.insideSettingsTab) {\n            this.navCtrl.popToRoot();\n          }\n        },\n        error => {\n          this.respUtility.showFailure(error);\n          loader.dismiss();\n        },\n        () => { loader.dismiss(); }\n      );\n\n    }\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/users/banking-details/banking-details.ts"],"sourceRoot":""}
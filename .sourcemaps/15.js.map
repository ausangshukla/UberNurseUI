{"version":3,"sources":["../../src/pages/care-homes/care-home-form/care-home-form.module.ts","../../src/pages/users/postcode-validator.ts","../../src/pages/care-homes/care-home-form/care-home-form.ts"],"names":[],"mappings":"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","file":"15.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { CareHomeForm } from './care-home-form';\n\n@NgModule({\n  declarations: [\n    CareHomeForm,\n  ],\n  imports: [\n    IonicPageModule.forChild(CareHomeForm),\n  ],\n  exports: [\n    CareHomeForm,\n  ]\n})\nexport class CareHomeFormModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/care-homes/care-home-form/care-home-form.module.ts","import { FormControl } from '@angular/forms';\nimport { PostCodeApi } from '../../providers/postcode-api';\n\n\nexport class PostCodeValidator {\n\n  static postCodeApi: PostCodeApi;\n\n  constructor(postCodeApi: PostCodeApi) {\n    PostCodeValidator.postCodeApi = postCodeApi;\n  }\n\n  checkPostCode(control: FormControl): any {\n\n    //control.markAsPending();\n    return new Promise(resolve => {\n\n      console.log(\"PostCodeValidator: checkPostCode\", control.value);\n      //control.markAsPending();\n\n      if (control.value && control.value.replace(/\\s/g, '').length >= 5) {\n        PostCodeValidator.postCodeApi.getPostCodes(control.value).subscribe(\n          resp => {\n            console.log(resp);\n            if (resp.length == 1) {\n              control.setErrors(null);\n              resolve(null);\n            } else {\n              control.setErrors({ postcode_invalid: true });\n              resolve({ postcode_invalid: true });\n            }\n          },\n          error => { console.log(error) },\n          () => { }\n        );\n      }\n\n    });\n  }\n\n}\n\n\n// WEBPACK FOOTER //\n// ./src/pages/users/postcode-validator.ts","import { NavController, NavParams, LoadingController, Ion, IonicPage } from 'ionic-angular';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { Component, ViewChild } from '@angular/core';\nimport { Events } from 'ionic-angular';\nimport { CareHomeApi } from '../../../providers/care-home-api';\nimport { PostCodeApi } from '../../../providers/postcode-api';\nimport { ResponseUtility } from '../../../providers/response-utility';\nimport { PostCodeValidator } from '../../users/postcode-validator';\n\n@IonicPage()\n@Component({\n  selector: 'page-care-home-form',\n  templateUrl: 'care-home-form.html',\n})\nexport class CareHomeForm {\n\n  care_home: {};\n  @ViewChild('signupSlider') signupSlider: any;\n\n  slideOneForm: FormGroup;\n  slideTwoForm: FormGroup;\n\n  submitAttempt: boolean = false;\n\n  constructor(public navCtrl: NavController,\n    public navParams: NavParams,\n    public events: Events,\n    public formBuilder: FormBuilder,\n    public loadingController: LoadingController,\n    public care_homeApi: CareHomeApi,\n    public postCodeApi: PostCodeApi,\n    public respUtility: ResponseUtility) {\n\n    this.care_home = this.navParams.data;\n\n    this.slideOneForm = formBuilder.group({\n       \n      name: ['', Validators.compose([Validators.required])],       \n      address: ['', Validators.compose([Validators.required])], \n      carer_break_mins: [0], \n      phone: ['', Validators.compose([Validators.minLength(10), Validators.maxLength(11), Validators.pattern('^\\\\d+$')])],            \n      postcode: ['', Validators.compose([Validators.minLength(7), Validators.required, new PostCodeValidator(this.postCodeApi).checkPostCode])],       \n      image_url: [''],\n      vat_number: ['', Validators.compose([Validators.required])], \n      company_registration_number: ['', Validators.compose([Validators.required])], \n      dress_code: [''],\n      parking_available: [false],\n      paid_unpaid_breaks: ['Unpaid'],\n      meals_provided_on_shift: [false],\n      po_req_for_invoice: [false],\n      meals_subsidised: [false],\n    });\n\n    this.slideTwoForm = formBuilder.group({\n            \n    });\n\n  }\n\n  ionViewDidLoad() {\n    console.log('ionViewDidLoad CareHomesForm');\n    this.respUtility.trackView(\"CareHomeForm\");\n  }\n\n\n  save() {\n    this.respUtility.trackEvent(\"CareHome\", \"Save\", \"click\");\n    this.submitAttempt = true;\n    //console.log(this.care_home);\n    let loader = this.loadingController.create({\n      content: 'Saving ...'\n    });\n\n    if (!this.slideOneForm.valid) {\n    }\n    else {\n      this.submitAttempt = false;\n      loader.present();\n\n      if (this.care_home[\"id\"]) {\n        this.care_homeApi.updateCareHome(this.care_home).subscribe(\n          care_home => {\n            this.respUtility.showSuccess('CareHome saved successfully.');    \n            this.navCtrl.pop();        \n          },\n          error => {\n            this.respUtility.showFailure(error);\n            loader.dismiss();\n            this.events.publish(\"care_home:registration:failed\");\n          },\n          () => {loader.dismiss();}\n        );\n      } else {\n        this.care_homeApi.createCareHome(this.care_home).subscribe(\n          care_home => {\n            this.events.publish(\"care_home:registration:success\", care_home);                        \n            this.navCtrl.popToRoot();\n            //this.respUtility.showSuccess('CareHome saved successfully. We will inform you once this has been verified');\n          },\n          error => {\n            this.respUtility.showFailure(error);\n            loader.dismiss();\n          },\n          () => {loader.dismiss();}\n        );\n      }\n    }\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/care-homes/care-home-form/care-home-form.ts"],"sourceRoot":""}
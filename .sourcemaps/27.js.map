{"version":3,"sources":["../../src/pages/shift/shift-reject/shift-reject.module.ts","../../src/pages/shift/shift-reject/shift-reject.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAAyC;AACO;AACH;AAa7C;IAAA;IAAgC,CAAC;IAApB,iBAAiB;QAX7B,+DAAQ,CAAC;YACR,YAAY,EAAE;gBACZ,kEAAW;aACZ;YACD,OAAO,EAAE;gBACP,8DAAe,CAAC,QAAQ,CAAC,kEAAW,CAAC;aACtC;YACD,OAAO,EAAE;gBACP,kEAAW;aACZ;SACF,CAAC;OACW,iBAAiB,CAAG;IAAD,wBAAC;CAAA;AAAH;;;;;;;;;;;;;;;;;;;;;;;;;ACfuB;AAC+B;AAChC;AAEgB;AACZ;AACc;AAOtE;IAWE,qBAAmB,OAAsB,EAAS,SAAoB,EAC5D,YAAiC,EAClC,WAAwB,EACxB,QAAkB,EAClB,iBAAoC,EACpC,WAA4B;QALlB,YAAO,GAAP,OAAO,CAAe;QAAS,cAAS,GAAT,SAAS,CAAW;QAC5D,iBAAY,GAAZ,YAAY,CAAqB;QAClC,gBAAW,GAAX,WAAW,CAAa;QACxB,aAAQ,GAAR,QAAQ,CAAU;QAClB,sBAAiB,GAAjB,iBAAiB,CAAmB;QACpC,gBAAW,GAAX,WAAW,CAAiB;QAEnC,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;QAC1C,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC;QAEhE,IAAI,CAAC,YAAY,GAAG,YAAY,CAAC,eAAe,CAAC;QAEjD,IAAI,CAAC,YAAY,GAAG,WAAW,CAAC,KAAK,CAAC;YAElC,MAAM,EAAE,CAAC,EAAE,EAAE,0DAAU,CAAC,OAAO,CAAC,CAAC,0DAAU,CAAC,QAAQ,CAAC,CAAC,CAAC;YACvD,YAAY,EAAE,CAAC,EAAE,CAAC;SAEnB,CAAC,CAAC;IAGP,CAAC;IAGD,sCAAgB,GAAhB;QAAA,iBAIC;QAHC,UAAU,CAAC;YACR,KAAI,CAAC,MAAM,CAAC,IAAI,EAAE,CAAC;QACtB,CAAC,EAAC,GAAG,CAAC,CAAC;IACT,CAAC;IACD,oCAAc,GAAd;QACE,OAAO,CAAC,GAAG,CAAC,4BAA4B,CAAC,CAAC;QAC1C,IAAI,CAAC,WAAW,CAAC,SAAS,CAAC,aAAa,CAAC,CAAC;IAC5C,CAAC;IAED,0BAAI,GAAJ,UAAK,KAAK;QACR,IAAG,KAAK,CAAC,MAAM,IAAI,OAAO,IAAI,KAAK,CAAC,YAAY,EAAE;YAC9C,KAAK,CAAC,MAAM,GAAG,KAAK,CAAC,YAAY,CAAC;SACrC;QACD,IAAG,IAAI,CAAC,gBAAgB,IAAI,QAAQ,EAAE;YAClC,KAAK,CAAC,eAAe,GAAG,UAAU,CAAC;SACtC;aAAM;YACH,KAAK,CAAC,eAAe,GAAG,WAAW,CAAC;SACvC;QAED,IAAI,CAAC,cAAc,CAAC,KAAK,CAAC,CAAC;IAC7B,CAAC;IAED,oCAAc,GAAd,UAAe,KAAK;QAClB,IAAI,CAAC,WAAW,CAAC,UAAU,CAAC,OAAO,EAAE,QAAQ,EAAE,OAAO,CAAC,CAAC;QACxD,KAAK,CAAC,QAAQ,GAAG,KAAK,CAAC;QACvB,KAAK,CAAC,eAAe,GAAG,UAAU;QAClC,IAAI,CAAC,cAAc,CAAC,KAAK,CAAC,CAAC;IAC7B,CAAC;IAGD,oCAAc,GAAd,UAAe,KAAK;QAApB,iBAqBC;QAnBC,IAAI,OAAO,GAAG,KAAK,CAAC;QACpB,IAAI,MAAM,GAAG,IAAI,CAAC,iBAAiB,CAAC,MAAM,CAAC;YACzC,OAAO,EAAE,uBAAuB;SACjC,CAAC,CAAC;QAEH,MAAM,CAAC,OAAO,EAAE,CAAC;QAEjB,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC,SAAS,CACxC,eAAK;YACH,KAAI,CAAC,OAAO,CAAC,SAAS,EAAE,CAAC;YACzB,UAAU,CAAE;gBACV,KAAI,CAAC,WAAW,CAAC,WAAW,CAAC,eAAe,CAAC,CAAC;YAChD,CAAC,EAAE,IAAI,CAAC,CAAC;QACX,CAAC,EACD,eAAK,IAAM,KAAI,CAAC,WAAW,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC,CAAC,MAAM,CAAC,OAAO,EAAE,CAAC,CAAC,CAAC,EACnE;YACE,MAAM,CAAC,OAAO,EAAE,CAAC;QACnB,CAAC,CACF,CAAC;IACJ,CAAC;IAGD,iCAAW,GAAX,UAAY,KAAK;QAAjB,iBAiBC;QAfC,IAAI,CAAC,WAAW,CAAC,UAAU,CAAC,OAAO,EAAE,QAAQ,EAAE,OAAO,CAAC,CAAC;QACxD,IAAI,MAAM,GAAG,IAAI,CAAC,iBAAiB,CAAC,MAAM,CAAC;YACzC,OAAO,EAAE,mBAAmB;SAC7B,CAAC,CAAC;QAEH,MAAM,CAAC,OAAO,EAAE,CAAC;QAEjB,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC,SAAS,CACxC,kBAAQ;YACN,KAAI,CAAC,WAAW,CAAC,WAAW,CAAC,eAAe,CAAC,CAAC;YAC9C,KAAI,CAAC,OAAO,CAAC,GAAG,EAAE,CAAC;QACrB,CAAC,EACD,eAAK,IAAM,KAAI,CAAC,WAAW,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC,CAAC,MAAM,CAAC,OAAO,EAAE,CAAC,CAAC,CAAC,EACnE,cAAQ,MAAM,CAAC,OAAO,EAAE,CAAC,CAAC,CAAC,CAC5B,CAAC;IACJ,CAAC;IAED,mCAAa,GAAb,UAAc,KAAK;QACjB,IAAI,CAAC,WAAW,CAAC,aAAa,CAAC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,KAAK,EAAE,QAAQ,CAAC,CAAC;IAC/E,CAAC;IAzGoB;QAApB,gEAAS,CAAC,QAAQ,CAAC;kCAAS,qDAAM;+CAAC;IALzB,WAAW;QAJvB,gEAAS,CAAC;YACT,QAAQ,EAAE,mBAAmB;WACG;SACjC,CAAC;uFAYsE;YAC9C,4DAAmB;YACrB,uEAAW;YACd,gEAAQ;YACC,sFAAiB;YACvB,QAAe;OAhB1B,WAAW,CAgHvB;IAAD,CAAC;AAAA;SAhHY,WAAW,oB","file":"27.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { ShiftReject } from './shift-reject';\n\n@NgModule({\n  declarations: [\n    ShiftReject,\n  ],\n  imports: [\n    IonicPageModule.forChild(ShiftReject),\n  ],\n  exports: [\n    ShiftReject,\n  ]\n})\nexport class ShiftRejectModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/shift/shift-reject/shift-reject.module.ts","import { Component, ViewChild } from '@angular/core';\nimport { IonicPage, NavController, NavParams, LoadingController, Select } from 'ionic-angular';\nimport { AngularTokenService } from 'angular-token';\nimport * as moment from 'moment';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { ShiftApi } from '../../../providers/shift-api';\nimport { ResponseUtility } from '../../../providers/response-utility';\n\n@IonicPage()\n@Component({\n  selector: 'page-shift-reject',\n  templateUrl: 'shift-reject.html',\n})\nexport class ShiftReject {\n\n  shift: any;\n  current_user: {};\n  slideOneForm: FormGroup;\n  @ViewChild(\"reason\") select: Select;\n\n  \n  // This stores whether we are rejecting the shift or cancelling\n  cancel_or_reject: \"Reject\";\n\n  constructor(public navCtrl: NavController, public navParams: NavParams,\n    private tokenService: AngularTokenService,\n    public formBuilder: FormBuilder,\n    public shiftApi: ShiftApi,\n    public loadingController: LoadingController,\n    public respUtility: ResponseUtility) {\n\n    this.shift = this.navParams.data[\"shift\"];\n    this.cancel_or_reject = this.navParams.data[\"cancel_or_reject\"];\n\n    this.current_user = tokenService.currentUserData;\n\n    this.slideOneForm = formBuilder.group({\n\n        reason: ['', Validators.compose([Validators.required])],\n        other_reason: ['']\n  \n      });\n\n    \n  }\n\n  \n  ionViewWillEnter() { //or whatever method you want to use\n    setTimeout(() => {\n       this.select.open();\n    },150);  \n  }\n  ionViewDidLoad() {\n    console.log('ionViewDidLoad ShiftReject');\n    this.respUtility.trackView(\"ShiftReject\");\n  }\n\n  save(shift) {\n    if(shift.reason == \"Other\" && shift.other_reason) {\n        shift.reason = shift.other_reason;\n    }\n    if(this.cancel_or_reject == \"Reject\") {\n        shift.response_status = \"Rejected\";\n    } else {\n        shift.response_status = \"Cancelled\";\n    } \n\n    this.updateResponse(shift);\n  }\n  \n  rejectResponse(shift) {\n    this.respUtility.trackEvent(\"Shift\", \"Reject\", \"click\");\n    shift.accepted = false;\n    shift.response_status = \"Rejected\"\n    this.updateResponse(shift);\n  }\n\n  \n  updateResponse(shift) {\n\n    let success = false;\n    let loader = this.loadingController.create({\n      content: 'Updating Responses...'\n    });\n\n    loader.present();\n\n    this.shiftApi.updateShift(shift).subscribe(\n      shift => {        \n        this.navCtrl.popToRoot();\n        setTimeout( () => {\n          this.respUtility.showSuccess('Shift Updated');\n        }, 1000);\n      },\n      error => { this.respUtility.showFailure(error); loader.dismiss(); },\n      () => { \n        loader.dismiss();\n      }\n    );\n  }\n\n  \n  deleteShift(shift) {\n\n    this.respUtility.trackEvent(\"Shift\", \"Delete\", \"click\");\n    let loader = this.loadingController.create({\n      content: 'Deleting Shift...'\n    });\n\n    loader.present();\n\n    this.shiftApi.deleteShift(shift).subscribe(\n      response => {\n        this.respUtility.showSuccess(\"Deleted Shift\");\n        this.navCtrl.pop();\n      },\n      error => { this.respUtility.showFailure(error); loader.dismiss(); },\n      () => { loader.dismiss(); }\n    );\n  }\n\n  confirmDelete(shift) {\n    this.respUtility.confirmDelete(this.deleteShift.bind(this), shift, \"Cancel\");\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/shift/shift-reject/shift-reject.ts"],"sourceRoot":""}
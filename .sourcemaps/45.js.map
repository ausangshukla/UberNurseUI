{"version":3,"sources":["../../src/pages/care-homes/care-home-banking-details/care-home-banking-details.module.ts","../../src/pages/care-homes/care-home-banking-details/care-home-banking-details.ts"],"names":[],"mappings":"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","file":"45.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { CareHomeBankingDetails } from './care-home-banking-details';\n\n@NgModule({\n  declarations: [\n    CareHomeBankingDetails,\n  ],\n  imports: [\n    IonicPageModule.forChild(CareHomeBankingDetails),\n  ],\n  exports: [\n    CareHomeBankingDetails,\n  ]\n})\nexport class CareHomeBankingDetailsModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/care-homes/care-home-banking-details/care-home-banking-details.module.ts","import { IonicPage, NavController, NavParams, AlertController, ToastController, LoadingController } from 'ionic-angular';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { Component, ViewChild } from '@angular/core';\nimport { AngularTokenService } from 'angular-token';\nimport { Events } from 'ionic-angular';\nimport { CareHomeApi } from '../../../providers/care-home-api';\nimport { ResponseUtility } from '../../../providers/response-utility';\n\n@IonicPage()\n@Component({\n  selector: 'page-bank-details',\n  templateUrl: 'care-home-banking-details.html',\n})\nexport class CareHomeBankingDetails {\n\n  care_home: {};\n  role = null;\n  slideOneForm: FormGroup;\n  submitAttempt: boolean = false;\n  insideSettingsTab = false;\n\n\n  constructor(public navCtrl: NavController,\n    public navParams: NavParams,\n    public formBuilder: FormBuilder,\n    public care_homeApi: CareHomeApi,\n    public respUtility: ResponseUtility,\n    public loadingController: LoadingController,\n    private tokenService: AngularTokenService,\n    public events: Events) {\n\n    this.slideOneForm = formBuilder.group({\n      bank_account: ['', Validators.compose([Validators.minLength(8), Validators.maxLength(8), Validators.required])],\n      sort_code: ['', Validators.compose([Validators.minLength(6), Validators.maxLength(6), Validators.required])]\n    });\n\n    let current_care_home = this.tokenService.currentUserData[\"care_home\"];\n    // This is a hack. We may need to display accept bank transactions in UI at some point\n    // For now banking details are not used so.\n    current_care_home.accept_bank_transactions = true;\n\n    this.care_home = {\n      \"id\": current_care_home.id,\n      \"bank_account\": current_care_home[\"bank_account\"],\n      \"sort_code\": current_care_home[\"sort_code\"],\n      \"accept_bank_transactions\": current_care_home[\"accept_bank_transactions\"]\n    }\n\n    if (this.navParams.data[\"insideSettingsTab\"]) {\n      this.insideSettingsTab = true;\n    }\n  }\n\n  ionViewDidLoad() {\n    console.log('ionViewDidLoad CareHomeBankingDetails');\n    this.respUtility.trackView(\"CareHomeBankingDetails\");\n  }\n\n  save() {\n\n    this.respUtility.trackEvent(\"User\", \"CareHomeBankingDetails\", \"save\");\n    this.submitAttempt = true;\n    //console.log(this.care_home);\n    let loader = this.loadingController.create({\n      content: 'Saving ...'\n    });\n\n    if (this.slideOneForm.invalid) {\n      //this.signupSlider.slideTo(0);\n      console.log(\"Invalid form \", this.slideOneForm.errors);\n    }\n    else {\n      this.submitAttempt = false;\n      loader.present();\n\n      this.care_homeApi.updateCareHome(this.care_home).subscribe(\n        care_home => {\n          this.respUtility.showSuccess('Saved successfully.');\n          this.events.publish(\"care_home:registration:success\", care_home);\n          if(!this.insideSettingsTab) {\n            this.navCtrl.popToRoot();\n          }\n        },\n        error => {\n          this.respUtility.showFailure(error);\n          loader.dismiss();\n        },\n        () => { loader.dismiss(); }\n      );\n\n    }\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/care-homes/care-home-banking-details/care-home-banking-details.ts"],"sourceRoot":""}